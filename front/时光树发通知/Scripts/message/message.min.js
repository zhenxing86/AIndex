$(function () { Vue.component("MsgImg", { template: "#msg-img", props: ["imgs"], methods: { show: function (a) { var c, b = []; for (c = 0; c < this.imgs.length; c++) b.push(this.imgs[c].url.replace(/!.*/g, "")); zyapp().com.showImgs(b[a], b, a, "updateimgs") } } }), Vue.component("MsgAudio", { template: "#msg-audio", props: ["audio"], data: function () { return { playing: !1, length: "" } }, methods: { play: function () { var a = this.$el.querySelector("audio"); this.playing ? (a.pause(), a.currentTime = 0) : a.play(), this.playing = !this.playing }, ended: function () { var a = this.$el.querySelector("audio"); a.pause(), a.currentTime = 0, this.playing = !this.playing }, loadedmetadata: function () { var a = this.$el.querySelector("audio"), b = parseInt(a.duration); this.length = b ? b + '"' : "&nbsp;" }, loaderror: function () { this.audio = "", this.length = "" } } }), Vue.component("MsgVideo", { template: "#msg-video", props: ["video"], methods: { play: function () { zyapp().com.playVideo(this.video) } } }); var a = new Vue({ el: "#app", data: { message: { taskid: 0, content: "", imgs: [], audios: [], videos: [] } } }); $.ajax({ url: "/message/MessageGetModel", data: { uid: document.querySelector("#uid").value, taskid: document.querySelector("#taskid").value, messagetype: document.querySelector("#messagetype").value, state: document.querySelector("#state").value }, success: function (a) { this.message = a }.bind(a) }) });