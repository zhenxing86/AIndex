!function (a, b) { "use strict"; "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function (a) { if (!a.document) throw new Error("zyapp requires a window with a document"); return b(a) } : b(a) }("undefined" != typeof window ? window : this, function (a, b) { "use strict"; function l(a) { console.log("onWebComponents$" + JSON.stringify(a || {})), i.version.android ? c.startAppActivity("onWebComponents$" + JSON.stringify(a || {})) : i.version.ios && (d.dispatchCommand("onWebComponents", { result: JSON.parse(JSON.stringify(a || {})) }, null, null), d.activate()) } function m() { g = !0; var a = f.splice(0, 1); a.length > 0 ? (l(a[0]), setTimeout(m, j().setting.interval)) : g = !1 } function n(a, b, c, d) { var e = { id: a, title: b, data: c ? 0 != c.code && c.result ? c : { code: 0, info: "", result: c } : {}, api: d || {} }; return f.splice(f.length, 0, e), g || m(), this } function u(a) { return i.version.sgs < (a.minVersion || 0) ? r() : !0 } var k, o, p, q, r, t, c = a.wst, d = a.ov_gap = { callbackId: Math.floor(2e9 * Math.random()), callbacks: {}, commandQueue: [], groupId: Math.floor(300 * Math.random()), groups: {}, listeners: {}, invoke: function (a, b, c, d) { a || (a = "defaultCommand"), b || (b = {}), this.callbackId++, this.callbacks[this.callbackId] = { success: c, fail: d }; var e = "ovgap://" + a + "/" + JSON.stringify(b) + "/" + this.callbackId; document.location = e }, dispatchCommand: function (a, b, c, d) { a || (a = "defaultCommand"), b || (b = {}), this.callbackId++, this.callbacks[this.callbackId] = { success: c, fail: d }; var e = a + "/" + JSON.stringify(b) + "/" + this.callbackId; this.commandQueue.push(e) }, fetchNativeCommands: function () { var a = JSON.stringify(this.commandQueue); return this.commandQueue = [], a }, activate: function () { document.location = "ovgap://ready" }, createGroup: function () { return this.groupId++, this.groups[this.groupId] = [], this.groupId }, dispatchCommandInGroup: function (a, b, c, d, e) { if (!this.groups[e]) return !1; a || (a = "defaultCommand"), b || (b = {}), this.callbackId++, this.callbacks[this.callbackId] = { success: c, fail: d }; var f = a + "/" + JSON.stringify(b) + "/" + this.callbackId; return this.groups[e].push(f), !0 }, activateGroup: function (a) { return this.groups[a] ? (document.location = "ovgap://group/" + a, void 0) : !1 }, fetchNativeGroupCommands: function (a) { if (!this.groups[a]) return []; var b = JSON.stringify(this.groups[a]); return this.groups[a] = [], b }, callbackSuccess: function (a, b) { try { this.callbackFromNative(a, b, !0) } catch (c) { console.log("Error in error callback: " + a + " = " + c) } }, callbackError: function (a, b) { try { this.callbackFromNative(a, b, !1) } catch (c) { console.log("Error in error callback: " + a + " = " + c) } }, callbackFromNative: function (a, b, c) { var d = this.callbacks[a]; d && (c ? d.success && d.success(a, b) : d.fail && d.fail(a, b), delete this.callbacks[a]) }, addGapListener: function (a, b, c) { a && b && c && (this.listeners[a] = { success: b, fail: c }) }, removeListener: function (a) { this.listeners[a] && (this.listeners[a] = null) }, triggerListenerSuccess: function (a, b) { if (this.listeners[a]) { var c = this.listeners[a]; c.success && c.success(a, b) } }, triggerListenerFail: function (a, b) { if (this.listeners[a]) { var c = this.listeners[a]; c.fail && c.fail(a, b) } } }, f = [], g = !1, h = !1, i = { version: function () { var a = navigator.userAgent; return { ios: !!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), android: !!a.match(/Android|Linux/), mqkt: parseFloat(a.match(/\bMQKT\b\/.*?(?=( |$))/) ? a.replace(/.*\bMQKT\/(?=.*(?=( |$)))/, "").replace(/ .*/, "") : "0"), sgs: parseFloat(a.match(/\bSGS\b\/.*?(?=( |$))/) ? a.replace(/.*\bSGS\/(?=.*(?=( |$)))/, "").replace(/ .*/, "") : "0"), ats: parseFloat(a.match(/\bATS\b\/.*?(?=( |$))/) ? a.replace(/.*\bATS\/(?=.*(?=( |$)))/, "").replace(/ .*/, "") : "0") } }() }, j = function () { return new j.fn.init }; return j.fn = j.prototype = {}, k = j.fn.init = function () { return this }, k.prototype = j.fn, j.prototype.browser = i, j.prototype.setting = { interval: 100 }, o = j.prototype.app = function () { return i.version.sgs ? "SGS" : i.version.ats ? "ATS" : i.version.mqkt ? "MQKT" : "" }(), q = function () { return p = document.createElement("div"), p.innerHTML = '<div style="position:absolute;left:50%;top:50%;z-index:999;margin:-6.12rem 0 0 -4.93rem ;width:9.86rem;height:12.3rem;border-radius:.15rem;"><p style="position:absolute;right:0rem;top:-1.6rem;width:100%;height:3.6rem;"><img src="http://conimg.yp.yeyimg.com/up/upgrade.png?v=1" style="width:100%;"></p><div style="background:#fff;border-radius:.15rem;padding-top:4.6rem;" "=""><a href="javascript:zyapp().closeUpdateDialog()" style=" position:absolute;right:-.6rem;top:-.6rem;width:1.2rem;height:1.2rem;border-radius:2rem;line-height:1.1rem;text-align:center;display:block;background:#fff;font-size:.7rem;"><img src="http://conimg.yp.yeyimg.com/up/close.png?v=1" style="width:45%;"></a><p style=" font-size:1rem;text-align:center;color:#2e9fff;">发现新版本</p><p style=" font-size:.48rem;color:#999;text-align:center;">85%的用户已升级</p><p style=" padding:.4rem .7rem;font-size:.56rem;line-height:.9rem;">您目前的版本不支持此功能，点击立即升级，体验最新效果。</p><div style="padding:.3rem 0;"><a href="http://sgs.zgyey.com/" style=" margin:0 auto;display:block;color:#fff;width:7.3rem;height:1.3rem;line-height:1.3rem;background:#70b0ff;border-radius:10rem;font-size:.64rem;text-align:center;">立即升级</a><p style=" font-size:.48rem;line-height:1rem;color:#999;text-align:center;">WIFI环境下更新不到30秒哦~</p></div></div></div><div style="display:block;position:absolute;top:0%;left:0%;width:100%;height:100%;z-index:98;background:black;opacity:0.45;"></div>', p }, r = j.prototype.showUpdateDialog = function () { return console.log("提示升级"), h || (document.body.style.overflow = "hidden", document.body.appendChild(p || q(o))), !1 }, j.prototype.closeUpdateDialog = function () { document.body.style.overflow = "", document.body.removeChild(p || q(o)) }, t = { logout: { id: 201, title: "退出登录" }, newWindow: { id: 202, title: "新建窗口", minVersion: 3.3 }, closeWindow: { id: 203, title: "关闭窗口" }, share: { id: 204, title: "分享" }, alert: { id: 205, title: "警告" }, toast: { id: 206, title: "提示" }, uploadSingleImg: { id: 207, title: "单图上传", minVersion: 3.3 }, uploadImgs: { id: 208, title: "多图上传", minVersion: 3.3 }, showImgs: { id: 209, title: "图片浏览(保存)" }, backKey: { id: 210, title: "返回键" }, ajax: { id: 211, title: "api调用", minVersion: 3.3 }, camera: { id: 212, title: "拍照", minVersion: 3.3 }, record: { id: 213, title: "录音", minVersion: 3.3 }, playVideo: { id: 214, title: "播放视频", minVersion: 3.3 }, clientData: { id: 215, title: "获取客户端数据", minVersion: 3.3 }, video: { id: 216, title: "录制视频", minVersion: 3.3 }, delImgs: { id: 217, title: "图片浏览(删除)" }, rightBtn: { id: 218, title: "右上角", minVersion: 3.3 }, closeAllWindow: { id: 219, title: "关闭全部窗口" }, datetimePicker: { id: 220, title: "时间选择器", minVersion: 3.3 }, setTitle: { id: 221, title: "设置标题" }, setNav: { id: 300, title: "设置导航", minVersion: 3.4 } }, j.prototype.com = { ajax: function (a, b, c, d, e) { var g, f = t.ajax; return u(f) ? (g = { url: a, data: b, done: c, fail: d, always: e }, n(f.id, f.title, {}, g)) : this }, logout: function (a) { var c, d, b = t.logout; return u(b) ? (c = {}, d = { url: a }, n(b.id, b.title, c, d)) : this }, newWindow: function (a, b, c) { var e, f, g, d = t.newWindow; return u(d) ? (!c && b && (e = c, c = b, b = e), a.match(/[a-zA-z]+:\/\/[^\s]*/) || (a = 0 == a.indexOf("/") ? location.protocol + "//" + location.host + "/" + a : location.href.substring(0, location.href.lastIndexOf("/") + 1) + a), f = { url: a, bar: null === b ? void 0 : { left: b, right: c || { type: 0 } } }, g = {}, n(d.id, d.title, f, g)) : this }, closeWindow: function () { var b, c, a = t.closeWindow; return u(a) ? (b = {}, c = {}, n(a.id, a.title, b, c)) : this }, share: function (a, b, c, d) { var f, g, e = t.share; return u(e) ? (f = { url: a, title: b, content: c, img: d }, g = {}, n(e.id, e.title, f, g)) : this }, alert: function (a) { var c, d, b = t.alert; return u(b) ? (c = { message: a }, d = {}, n(b.id, b.title, c, d)) : this }, toast: function (a) { var c, d, b = t.toast; return u(b) ? (c = { message: a }, d = {}, n(b.id, b.title, c, d)) : this }, uploadSingleImg: function (a, b, c) { var e, f, d = t.uploadSingleImg; return u(d) ? (e = { path: a, cut: b, callback: c }, f = {}, n(d.id, d.title, e, f)) : this }, uploadImgs: function (a, b, c) { var e, f, d = t.uploadImgs; return u(d) ? (c || (c = b, b = ""), e = { path: b, count: a, callback: c }, f = {}, n(d.id, d.title, e, f)) : this }, showImgs: function (a, b, c) { var e, f, d = t.showImgs; return u(d) ? (e = { img: a, imgs: b, index: c }, f = {}, n(d.id, d.title, e, f)) : this }, backKey: function (a) { var c, d, b = t.backKey; return u(b) ? (c = { callback: a }, d = {}, n(b.id, b.title, c, d)) : this }, carema: function (a, b) { var d, e, c = t.camera; return u(c) ? (d = { cut: a, callback: b }, e = {}, n(c.id, c.title, d, e)) : this }, record: function (a) { var c, d, b = t.record; return u(b) ? (c = { callback: a }, d = {}, n(b.id, b.title, c, d)) : this }, playVideo: function (a) { var c, d, b = t.playVideo; return u(b) ? (c = { url: a }, d = {}, n(b.id, b.title, c, d)) : this }, clientData: function (a) { var c, d, b = t.clientData; return u(b) ? (c = { callback: a }, d = {}, n(b.id, b.title, c, d)) : this }, video: function (a) { var c, d, b = t.video; return u(b) ? (c = { callback: a }, d = {}, n(b.id, b.title, c, d)) : this }, delImgs: function (a, b, c, d) { var f, g, e = t.delImgs; return u(e) ? (f = { img: a, imgs: b, index: c, callback: d }, g = {}, n(e.id, e.title, f, g)) : this }, rightBtn: function (a, b, c) { var e, f, d = t.rightBtn; return u(d) ? (e = { type: a || 0, content: b, callback: c }, f = {}, n(d.id, d.title, e, f)) : this }, closeAllWindow: function () { var b, c, a = t.closeAllWindow; return u(a) ? (b = {}, c = {}, n(a.id, a.title, b, c)) : this }, datetimePicker: function (a, b, c, d, e) { var g, h, f = t.datetimePicker; return u(f) ? (g = { type: a, value: b, min: c, max: d, callback: e }, h = {}, n(f.id, f.title, g, h)) : this }, setTitle: function (a) { var b, c, d; return i.version.ios ? (b = t.setTitle, u(b) ? (c = { title: a }, d = {}, n(b.id, b.title, c, d)) : this) : (document.title = a, void 0) }, setNav: function (a, b, c) { var e, f, d = t.setNav; return u(d) ? (e = { left: a || { type: 0 }, title: "string" == typeof b ? b : document.title, right: c || b || { type: 0 } }, f = {}, n(module.id, module.title, e, f)) : this } }, "function" == typeof define && define.amd && define("zyapp", [], function () { return j }), b || (a.zyapp = j), setTimeout(function () { h = !0, i.version.sgs > 3.3 ? j().com.setNav() : j().com.rightBtn(), h = !1 }.bind(j), 10), j });